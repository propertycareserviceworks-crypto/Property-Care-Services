<html lang="en">
<head>
<meta charset="UTF-8">
<title>FormSubmit Autoresponse Test</title>
<style>
  body { font-family: Arial, sans-serif; line-height: 1.5; padding: 20px; }
  label { display: block; margin: 8px 0; }
  .form-list h3 { margin-top: 20px; }
  #priceDisplay { margin-top: 15px; font-weight: bold; color: #1E40AF; }
</style>
</head>
<body>
<form action="https://formsubmit.co/propertycareserviceworks@gmail.com" method="POST">
  
  <label for="name">Full Name:</label>
  <input type="text" id="name" name="name" placeholder="Enter your full name" required>
  
  <label for="email">Email:</label>
  <input type="email" id="email" name="email" placeholder="Enter your email" required>
  
  <label for="address">Address:</label>
  <input type="text" id="address" name="address" placeholder="Enter your address" required>
  
  <label for="phone">Phone Number:</label>
  <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" required>
  
  <div class="form-list">
    <h3>House Info</h3>
    <label><input type="radio" name="houseType" value="Lane House / Town House" required> Lane House / Town House</label>
    <label><input type="radio" name="houseType" value="Attached Garage"> Attached Garage</label>

    <h3>Service Type</h3>
    <label><input type="radio" name="serviceType" value="Basic" required> Basic</label>
    <label><input type="radio" name="serviceType" value="Premium"> Premium</label>
    <label><input type="radio" name="serviceType" value="V.I.P"> V.I.P</label>

    <h3>Driveway Spaces</h3>
    <p>If you have a driveway, how many cars can it fit? ($15 each additional car)</p>
    <select id="driveway" name="driveway" required>
      <option value="">Select</option>
      <option value="0">0</option>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
    </select>

    <h3>Additional Snow Areas (Additional $30 for some areas)</h3>
    <label><input type="checkbox" name="snowAreas[]" value="Front walks and steps"> Front walks and steps</label>
    <label><input type="checkbox" name="snowAreas[]" value="Deck or patio"> Deck or patio</label>
    <label><input type="checkbox" name="snowAreas[]" value="Corner city sidewalk"> Corner city sidewalk (+$30)</label>
    <label><input type="checkbox" name="snowAreas[]" value="Side path"> Side path (+$30)</label>

    <h3>Price Details</h3>
    <p id="priceDisplay">Select options to see the total price.</p>
  </div>
  
  <!-- Hidden field to send total price -->
  <input type="hidden" id="totalPrice" name="totalPrice" value="">

  <input type="hidden" name="_subject" value="Test Submission">
  <input type="hidden" name="_autoresponse" 
         value="Thank you for your message. This is a test autoresponse from Property Care Service Works.">
  <input type="hidden" name="_template" value="table">
  <input type="hidden" name="_captcha" value="true">
  
  <button type="submit">Send Test</button>
</form>

<script>
const prices = {
  "Lane House / Town House": { "Basic": 120, "Premium": 150, "V.I.P": 180 },
  "Attached Garage": { "Basic": 120, "Premium": 150, "V.I.P": 180 }
};

const houseRadios = document.querySelectorAll('input[name="houseType"]');
const serviceRadios = document.querySelectorAll('input[name="serviceType"]');
const drivewaySelect = document.getElementById('driveway');
const snowCheckboxes = document.querySelectorAll('input[name="snowAreas[]"]');
const priceDisplay = document.getElementById('priceDisplay');
const totalPriceField = document.getElementById('totalPrice');

function updatePrice() {
  const house = document.querySelector('input[name="houseType"]:checked');
  const service = document.querySelector('input[name="serviceType"]:checked');
  const driveway = parseInt(drivewaySelect.value || 0, 10);

  if(house && service && !isNaN(driveway)) {
    let basePrice = prices[house.value][service.value];
    let drivewayFee = driveway * 15;

    let additionalSnowFee = 0;
    snowCheckboxes.forEach(cb => {
      if(cb.checked && (cb.value === "Corner city sidewalk" || cb.value === "Side path")) {
        additionalSnowFee += 30;
      }
    });

    let total = basePrice + drivewayFee + additionalSnowFee;

    priceDisplay.textContent = `${house.value} - ${service.value} Service: $${basePrice} + Driveway Fee $${drivewayFee} + Snow Fee $${additionalSnowFee} = Total: $${total}`;

    // Update hidden field so FormSubmit receives the total price
    totalPriceField.value = total;
  } else {
    priceDisplay.textContent = "Select options to see the total price.";
    totalPriceField.value = "";
  }
}

houseRadios.forEach(r => r.addEventListener('change', updatePrice));
serviceRadios.forEach(r => r.addEventListener('change', updatePrice));
drivewaySelect.addEventListener('change', updatePrice);
snowCheckboxes.forEach(cb => cb.addEventListener('change', updatePrice));
</script>
</body>
</html>
