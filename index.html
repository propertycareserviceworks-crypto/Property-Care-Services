<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Property Care Service Form</title>
<style>
  body { font-family: Arial, sans-serif; line-height: 1.5; padding: 20px; }
  label { display: block; margin: 8px 0; }
  .form-list h3 { margin-top: 20px; }
  #priceDisplay { margin-top: 15px; font-weight: bold; color: #1E40AF; }
  table { border-collapse: collapse; width: 100%; margin-top: 10px; }
  th, td { border: 1px solid #1E40AF; padding: 5px; text-align: left; }
  th { background-color: #e0e7ff; }
</style>
</head>
<body>
<form action="https://formsubmit.co/propertycareserviceworks@gmail.com" method="POST">
  
  <label for="name">Full Name:</label>
  <input type="text" id="name" name="name" placeholder="Enter your full name" required>
  
  <label for="email">Email:</label>
  <input type="email" id="email" name="email" placeholder="Enter your email" required>
  
  <label for="address">Address:</label>
  <input type="text" id="address" name="address" placeholder="Enter your address" required>
  
  <label for="phone">Phone Number:</label>
  <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" required>
  
  <div class="form-list">
    <h3>House Info</h3>
    <label><input type="radio" name="houseType" value="Lane House / Town House" required> Lane House / Town House</label>
    <label><input type="radio" name="houseType" value="Attached Garage"> Attached Garage</label>

    <h3>Service Type</h3>
    <label><input type="radio" name="serviceType" value="Basic" required> Basic</label>
    <label><input type="radio" name="serviceType" value="Premium"> Premium</label>
    <label><input type="radio" name="serviceType" value="V.I.P"> V.I.P</label>

    <h3>Driveway Spaces</h3>
    <p>If you have a driveway, how many cars can it fit?</p>
    <select id="driveway" name="driveway" required>
      <option value="">Select</option>
      <option value="0">0</option>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
    </select>

    <h3>Clear Snow From These Areas</h3>
    <p>Front walks and steps:</p>
    <label><input type="radio" name="front_walks" value="Yes" required> Yes</label>
    <label><input type="radio" name="front_walks" value="No" required> No</label>

    <p>Corner city sidewalk:</p>
    <label><input type="radio" name="corner_sidewalk" value="Yes" required> Yes</label>
    <label><input type="radio" name="corner_sidewalk" value="No" required> No</label>

    <p>Side path:</p>
    <label><input type="radio" name="side_path" value="Yes" required> Yes</label>
    <label><input type="radio" name="side_path" value="No" required> No</label>

    <p>Deck or patio:</p>
    <label><input type="radio" name="deck_patio" value="Yes" required> Yes</label>
    <label><input type="radio" name="deck_patio" value="No" required> No</label>

    <h3>Additional Notes</h3>
    <textarea name="notes" rows="4" cols="50" placeholder="Enter any notes here..."></textarea>

    <h3>Price Details</h3>
    <p id="priceDisplay">Select a House Type and Service Type to see the price.</p>
  </div>

  <!-- Hidden fields for autoresponse breakdown -->
  <input type="hidden" name="houseServiceFee" id="houseServiceFee" value="">
  <input type="hidden" name="drivewayFee" id="drivewayFee" value="">
  <input type="hidden" name="cornerSidewalkFee" id="cornerSidewalkFee" value="">
  <input type="hidden" name="sidePathFee" id="sidePathFee" value="">
  <input type="hidden" name="totalPrice" id="totalPrice" value="">

  <input type="hidden" name="_subject" value="Service Request Submission">
  <input type="hidden" name="_autoresponse" 
         value="Thank you for choosing our service. Here is your estimated price breakdown:

{{houseServiceFee}}
{{drivewayFee}}
{{cornerSidewalkFee}}
{{sidePathFee}}

Total: ${{totalPrice}}

We will reach out shortly to confirm your service. If you have any questions, please text or call us at [xxxxxx] or reply to this email.">
  <input type="hidden" name="_template" value="table">
  <input type="hidden" name="_captcha" value="true">
  
  <button type="submit">Confirm Request</button>
</form>

<script>
const prices = {
  "Lane House / Town House": { "Basic": 120, "Premium": 150, "V.I.P": 180 },
  "Attached Garage": { "Basic": 120, "Premium": 150, "V.I.P": 180 }
};

const houseRadios = document.querySelectorAll('input[name="houseType"]');
const serviceRadios = document.querySelectorAll('input[name="serviceType"]');
const drivewaySelect = document.getElementById('driveway');
const cornerSidewalkRadios = document.querySelectorAll('input[name="corner_sidewalk"]');
const sidePathRadios = document.querySelectorAll('input[name="side_path"]');
const priceDisplay = document.getElementById('priceDisplay');

// Hidden fields for autoresponse
const houseServiceFeeField = document.getElementById('houseServiceFee');
const drivewayFeeField = document.getElementById('drivewayFee');
const cornerSidewalkFeeField = document.getElementById('cornerSidewalkFee');
const sidePathFeeField = document.getElementById('sidePathFee');
const totalPriceField = document.getElementById('totalPrice');

function getSelectedValue(radioNodeList) {
  const selected = document.querySelector(`input[name="${radioNodeList[0].name}"]:checked`);
  return selected ? selected.value : null;
}

function updatePrice() {
  const house = getSelectedValue(houseRadios);
  const service = getSelectedValue(serviceRadios);
  const driveway = parseInt(drivewaySelect.value) || 0;
  const cornerSidewalk = getSelectedValue(cornerSidewalkRadios);
  const sidePath = getSelectedValue(sidePathRadios);

  if (!house || !service) {
    priceDisplay.innerHTML = "Select a House Type and Service Type to see the price.";
    totalPriceField.value = "";
    return;
  }

  let basePrice = prices[house][service];
  let total = basePrice;
  const fees = [{ item: `${house} - ${service} Service`, price: basePrice }];

  // Driveway Fee: $15 per car beyond 2
  let drivewayFeeText = '';
  if (driveway > 2) {
    for (let i = 3; i <= driveway; i++) {
      fees.push({ item: `Driveway Car ${i} Fee`, price: 15 });
      total += 15;
      drivewayFeeText += `Driveway Car ${i} Fee: $15\n`;
    }
  }

  // Corner Sidewalk Fee
  let cornerSidewalkFee = (cornerSidewalk === "Yes") ? 30 : 0;
  if (cornerSidewalkFee > 0) fees.push({ item: "Corner Sidewalk", price: cornerSidewalkFee });
  total += cornerSidewalkFee;

  // Side Path Fee
  let sidePathFee = (sidePath === "Yes") ? 30 : 0;
  if (sidePathFee > 0) fees.push({ item: "Side Path", price: sidePathFee });
  total += sidePathFee;

  // Update hidden fields for autoresponse
  houseServiceFeeField.value = `${house} - ${service} Service: $${basePrice}`;
  drivewayFeeField.value = drivewayFeeText.trim();
  cornerSidewalkFeeField.value = cornerSidewalkFee > 0 ? `Corner Sidewalk: $${cornerSidewalkFee}` : '';
  sidePathFeeField.value = sidePathFee > 0 ? `Side Path: $${sidePathFee}` : '';
  totalPriceField.value = total;

  // Build table HTML for your email
  let tableHTML = `<table>
    <tr><th>Item</th><th>Price ($)</th></tr>`;
  fees.forEach(fee => {
    tableHTML += `<tr><td>${fee.item}</td><td>${fee.price}</td></tr>`;
  });
  tableHTML += `<tr><td><strong>Total</strong></td><td><strong>${total}</strong></td></tr>`;
  tableHTML += `</table>`;

  priceDisplay.innerHTML = tableHTML;
}

// Event listeners
houseRadios.forEach(radio => radio.addEventListener('change', updatePrice));
serviceRadios.forEach(radio => radio.addEventListener('change', updatePrice));
drivewaySelect.addEventListener('change', updatePrice);
[cornerSidewalkRadios, sidePathRadios].forEach(group => {
  group.forEach(radio => radio.addEventListener('change', updatePrice));
});
</script>
</body>
</html>
