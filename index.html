<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Snow Removal Form</title>
<style>
/* ... keep all your existing styles here ... */
</style>
</head>
<body>

<video class="bg-video" autoplay muted loop playsinline>
  <source src="https://ik.imagekit.io/uiffzsgnp/istockphoto-1470507283-640_adpp_is.mp4" type="video/mp4">
</video>
<div class="overlay"></div>

<div class="welcome-box">
  <img src="https://i.postimg.cc/WzBpPj8y/wnt-1-Made-with-Poster-My-Wall.jpg"
       alt="Snow Removal Banner"
       style="width: 100%; max-width: 800px; border-radius: 12px; margin: 0 0 20px 0; box-shadow: 0 8px 20px rgba(0,0,0,0.3);">
  <p>Fill out our request form below to get started!</p>
</div>

<div class="hamburger" id="hamburger" onclick="toggleMenu()">
  <div></div><div></div><div></div>
</div>

<div class="menu" id="menu">
  <h3>Service Details</h3>
  <p><strong>Basic:</strong> Standard snow removal and driveway clearing.</p>
  <p><strong>Premium:</strong> Walkway, driveway, and sidewalk service included.</p>
  <p><strong>V.I.P:</strong> Full priority service + de-icing treatment.</p>
  <h3>Contact Info</h3>
  <p>üìû (123) 456-7890</p>
  <p>üìß info@testbusiness.com</p>
  <p>üìç Saskatoon, SK</p>
  <button class="close-menu" onclick="toggleMenu()">Close</button>
</div>

<div class="box">
  <form id="snowForm" action="https://formsubmit.co/propertycareserviceworks@gmail.com" method="POST">
    <!-- FormSubmit integration -->
    <input type="hidden" name="_subject" value="New Snow Removal Request!">
    <input type="hidden" name="_template" value="table">
    <input type="hidden" name="_captcha" value="true">
    <input type="hidden" id="autoresponseField" name="_autoresponse" value="">
    <input type="hidden" id="message" name="message">

    <h2><center>Service Request Form</center></h2>

    <label for="name">Full Name</label>
    <input type="text" id="name" name="name" placeholder="Enter your name" required />

    <label for="email">Email</label>
    <input type="email" id="email" name="email" placeholder="Enter your email" required />

    <label for="phone">Phone Number</label>
    <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" required />

    <label for="address">Address</label>
    <textarea id="address" name="address" rows="3" placeholder="Enter your address" required></textarea>

    <label for="location">Location</label>
    <select id="location" name="location" required>
      <option value="">-- Select Location --</option>
      <option value="Rosewood">Rosewood</option>
      <option value="Briarwood">Briarwood</option>
      <option value="Lakeridge">Lakeridge</option>
    </select>

    <div class="form-list">
      <h3>House Info</h3>
      <label><input type="radio" name="houseType" value="Lane House / Town House" required>Lane House / Town House</label>
      <label><input type="radio" name="houseType" value="Attached Garage">Attached Garage</label>
      <label><input type="radio" name="houseType" value="Acreage">Acreage</label>

      <h3>Service Type</h3>
      <label><input type="radio" name="serviceType" value="Basic" required>Basic</label>
      <label><input type="radio" name="serviceType" value="Premium">Premium</label>
      <label><input type="radio" name="serviceType" value="V.I.P">V.I.P</label>
    </div>

    <div class="form-list">
      <h3>Driveway Spaces</h3>
      <p>If you have a driveway, how many cars can it fit?</p>
      <select id="driveway" name="driveway">
        <option value="0">0</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
      </select>

      <h3>Clear Snow From These Areas</h3>
      <label><input type="checkbox" name="snowAreas[]" value="Front walks and steps">Front walks and steps</label>
      <label><input type="checkbox" name="snowAreas[]" value="Corner city sidewalk">Corner city sidewalk</label>
      <label><input type="checkbox" name="snowAreas[]" value="Back path">Back path</label>
      <label><input type="checkbox" name="snowAreas[]" value="Side path">Side path</label>
      <label><input type="checkbox" name="snowAreas[]" value="Deck or patio">Deck or patio</label>
      <label><input type="checkbox" name="snowAreas[]" value="Driveway apron/approach">Driveway apron/approach</label>
    </div>

    <button type="button" id="checkPriceBtn">Check Price</button>
  </form>
</div>

<div id="priceModal">
  <div id="priceModalContent">
    <h3>Price Breakdown</h3>
    <div id="priceDetails"></div>
    <p>Total: $<span id="totalPrice">0</span></p>
    <button id="confirmBtn">Confirm & Submit</button>
    <button id="cancelBtn">Cancel</button>
  </div>
</div>

<script>
const form = document.getElementById('snowForm');
const checkPriceBtn = document.getElementById('checkPriceBtn');
const priceModal = document.getElementById('priceModal');
const priceDetails = document.getElementById('priceDetails');
const totalPriceEl = document.getElementById('totalPrice');
const confirmBtn = document.getElementById('confirmBtn');
const cancelBtn = document.getElementById('cancelBtn');
const messageInput = document.getElementById('message');
const autoresponseField = document.getElementById('autoresponseField');

checkPriceBtn.addEventListener('click', () => {
  let total = 0;
  let breakdown = '';
  let emailText = "Price Breakdown:\n";

  const service = document.querySelector('input[name="serviceType"]:checked');
  const house = document.querySelector('input[name="houseType"]:checked');

  if (service && house) {
    let price = 0;
    if (house.value === "Lane House / Town House") {
      price = service.value === "Basic" ? 120 : service.value === "Premium" ? 150 : 180;
    } else if (house.value === "Attached Garage") {
      price = service.value === "Basic" ? 150 : service.value === "Premium" ? 180 : 210;
    } else if (house.value === "Acreage") {
      price = service.value === "Basic" ? 180 : service.value === "Premium" ? 210 : 240;
    }
    total += price;
    breakdown += `${house.value} - ${service.value}: $${price}<br>`;
    emailText += `${house.value} - ${service.value}: $${price}\n`;
  }

  const drivewayCount = parseInt(document.getElementById('driveway').value) || 0;
  if (drivewayCount > 0) {
    const drivewayFee = drivewayCount * 10;
    total += drivewayFee;
    breakdown += `Driveway spaces (${drivewayCount}): $${drivewayFee}<br>`;
    emailText += `Driveway spaces (${drivewayCount}): $${drivewayFee}\n`;
  }

  const areas = document.querySelectorAll('input[name="snowAreas[]"]:checked');
  areas.forEach(area => {
    let areaFee = area.value !== "Front walks and steps" ? 10 : 0;
    if (areaFee > 0) {
      breakdown += `${area.value}: $${areaFee}<br>`;
      emailText += `${area.value}: $${areaFee}\n`;
      total += areaFee;
    }
  });

  emailText += `Total: $${total}`;
  priceDetails.innerHTML = breakdown;
  totalPriceEl.textContent = total;
  priceModal.style.display = 'flex';

  const name = document.getElementById('name').value;
  const email = document.getElementById('email').value;

  messageInput.value = emailText;
  autoresponseField.value =
    `Hello ${name},\n\nThank you for your snow removal request!\nHere is your price summary:\n\n${emailText}\n\nWe'll contact you soon.\n\n- Property Care Service Works`;
});

cancelBtn.addEventListener('click', () => priceModal.style.display = 'none');
confirmBtn.addEventListener('click', () => { priceModal.style.display = 'none'; form.submit(); });

function toggleMenu() {
  document.getElementById('menu').classList.toggle('active');
  document.getElementById('hamburger').classList.toggle('active');
}
</script>
</body>
</html>
